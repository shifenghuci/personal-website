<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .avatar-container {
            width:100px;
            height: 100px;
            border: 1px black dashed;
            border-radius: 50%;
            padding: 20px;

            position: fixed;
            bottom: 5px;
            right: 5px;
        }

        #avatar {
            height: 100%;
            width: 100%;
            object-fit: cover;
        }
    </style>
</head>
<body>
    <div class="avatar-container">
        <img id="avatar" src="avatars/confident.png" alt="">
    </div>

    <script>
        const avatar = document.getElementById('avatar');
        const allAvatars = ["neutral", "neutral_2", "confident", "amused", "thinking"];

        // Function to get a random integer between min and max (inclusive)
        function getRandomDelay(min, max) {
            // 1500ms (1.5s) to 4000ms (4s) for a nice pause range
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Function to select a random avatar from the array
        function getRandomAvatar(currentSrc) {
            let newAvatar;
            let randomIndex;
            
            // Use a do-while loop to ensure the NEW avatar is different from the CURRENT one
            do {
                randomIndex = Math.floor(Math.random() * allAvatars.length);
                newAvatar = allAvatars[randomIndex];
            } while (currentSrc.includes(newAvatar)); 
            
            return newAvatar;
        }

        // The main loop function
        function changeAvatar() {
            // Get the name of the current avatar from the src attribute
            const currentSrc = avatar.src;
            
            // 1. Get a random avatar name that's NOT the current one
            const newAvatarName = getRandomAvatar(currentSrc);
            
            // 2. Set the new image source
            avatar.src = `avatars/${newAvatarName}.png`;
            
            // 3. Get a random delay (e.g., between 1500ms and 4000ms)
            const delay = getRandomDelay(1500, 4000);

            // 4. Restart the loop after the random delay
            setTimeout(changeAvatar, delay);
        }

        // Start the sequence
        // (Wait 1 second before the very first change)
        setTimeout(changeAvatar, 2500);
    </script>
</body>
</html>